# Деплой на Railway

## Подготовка к деплою

### 1. Создание аккаунта на Railway
1. Перейдите на [railway.app](https://railway.app)
2. Зарегистрируйтесь через GitHub
3. Создайте новый проект

### 2. Подключение репозитория
1. В Railway Dashboard нажмите "New Project"
2. Выберите "Deploy from GitHub repo"
3. Подключите ваш GitHub репозиторий
4. Выберите ветку (обычно `main` или `master`)

### 3. Настройка базы данных PostgreSQL
1. В проекте Railway нажмите "New Service"
2. Выберите "Database" → "PostgreSQL"
3. Railway автоматически создаст базу данных

### 4. Настройка переменных окружения
После создания базы данных, Railway автоматически добавит переменные окружения. Проверьте, что они есть в разделе "Variables":

- `DB_HOST` - хост базы данных
- `DB_NAME` - имя базы данных  
- `DB_USER` - пользователь базы данных
- `DB_PASSWORD` - пароль базы данных
- `DB_PORT` - порт базы данных (обычно 5432)

### 5. Деплой приложения
1. Railway автоматически обнаружит Dockerfile и начнет сборку
2. Дождитесь завершения сборки и деплоя
3. Приложение будет доступно по URL, который Railway предоставит

## Структура файлов для деплоя

- `Dockerfile` - конфигурация Docker контейнера
- `railway.json` - настройки для Railway
- `.dockerignore` - файлы, исключаемые из Docker образа
- `appsettings.json` - конфигурация с переменными окружения

## Возможные проблемы

### 1. Ошибка подключения к базе данных
- Проверьте переменные окружения в Railway Dashboard
- Убедитесь, что база данных PostgreSQL создана и запущена

### 2. Ошибка миграции
- Миграции применяются автоматически при запуске приложения
- Проверьте логи в Railway Dashboard

### 3. Приложение не запускается
- Проверьте логи сборки и запуска в Railway Dashboard
- Убедитесь, что все зависимости указаны в `WebApplication1.csproj`

## Мониторинг

- Логи доступны в Railway Dashboard
- Метрики производительности в разделе "Metrics"
- Переменные окружения можно редактировать в разделе "Variables"

## Обновление приложения

При каждом push в GitHub репозиторий Railway автоматически пересоберет и перезапустит приложение. 